<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Generates, from one (or several) BIN-file(s) of Single-grain OSL measurements, a list of luminescence data and information before statistical analysis (DEPRECATED) — Generate_DataFile-deprecated • BayLum</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generates, from one (or several) BIN-file(s) of Single-grain OSL measurements, a list of luminescence data and information before statistical analysis (DEPRECATED) — Generate_DataFile-deprecated"><meta name="description" content="This function is used to generate, from the BIN file(s), a list of values of:
Single-grain OSL intensities and associated uncertainties, regenerative doses, etc., which will be the input of the Bayesian models.
To be easy-to-use, this function requires a rigorous organisation - all needed files should be arranged in one folder -
of informations concerning each BIN file.
It is possible to process data for various samples simultaneously and to consider more than one BIN file per sample."><meta property="og:description" content="This function is used to generate, from the BIN file(s), a list of values of:
Single-grain OSL intensities and associated uncertainties, regenerative doses, etc., which will be the input of the Bayesian models.
To be easy-to-use, this function requires a rigorous organisation - all needed files should be arranged in one folder -
of informations concerning each BIN file.
It is possible to process data for various samples simultaneously and to consider more than one BIN file per sample."><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">BayLum</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.3.3.9000-13</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home"></span> Home</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/BayLum.html"><span class="play"></span> Get Started</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/ConfigFile_Specification.html"><span class="play"></span> YAML configuration</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">References</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="nav-link" href="../news/index.html"><span class="fa fa-newspaper-o"></span> News</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/R-Lum/BayLum"><span class="fa fa-github"></span> GitHub</a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Generates, from one (or several) BIN-file(s) of Single-grain OSL measurements, a list of luminescence data and information before statistical analysis (DEPRECATED)</h1>
      <small class="dont-index">Source: <a href="https://github.com/crp2a/BayLum/blob/master/R/Generate_DataFile.R" class="external-link"><code>R/Generate_DataFile.R</code></a></small>
      <div class="d-none name"><code>Generate_DataFile-deprecated.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function is used to generate, from the BIN file(s), a list of values of:
<b>Single-grain</b> OSL intensities and associated uncertainties, regenerative doses, etc., which will be the input of the Bayesian models.
To be easy-to-use, this function requires a rigorous organisation - all needed files should be arranged in one folder -
of informations concerning each BIN file. <br>
It is possible to process data for various samples simultaneously and to consider more than one BIN file per sample.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">Generate_DataFile</span><span class="op">(</span></span>
<span>  <span class="va">Path</span>,</span>
<span>  <span class="va">FolderNames</span>,</span>
<span>  <span class="va">Nb_sample</span>,</span>
<span>  Nb_binfile <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">FolderNames</span><span class="op">)</span>,</span>
<span>  BinPerSample <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="va">Nb_sample</span><span class="op">)</span>,</span>
<span>  sepDP <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">","</span><span class="op">)</span>,</span>
<span>  sepDE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">","</span><span class="op">)</span>,</span>
<span>  sepDS <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">","</span><span class="op">)</span>,</span>
<span>  sepR <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"="</span><span class="op">)</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-path">Path<a class="anchor" aria-label="anchor" href="#arg-path"></a></dt>
<dd><p><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a> (<strong>required</strong>): the path to the project folder, containing one or more sub folders in which the BIN files
are located. If it is not equal to "", it must be terminated by "/".</p></dd>


<dt id="arg-foldernames">FolderNames<a class="anchor" aria-label="anchor" href="#arg-foldernames"></a></dt>
<dd><p><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a> (<strong>required</strong>): list of names of the sub-folders containing the BIN files</p><ul><li><p>each sub folder must contain a BIN file and associated csv files.
See details for more informations on associated csv files required in the sub folders.
If there is more than one BIN file per sample, see the details section for instructions regarding how to correctly fill the
<code>FolderNames</code> vector.</p></li>
</ul></dd>


<dt id="arg-nb-sample">Nb_sample<a class="anchor" aria-label="anchor" href="#arg-nb-sample"></a></dt>
<dd><p><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a> (<strong>required</strong>): number of samples.</p></dd>


<dt id="arg-nb-binfile">Nb_binfile<a class="anchor" aria-label="anchor" href="#arg-nb-binfile"></a></dt>
<dd><p><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a> (with default): number of BIN files. It must be equal to, or greater than <code>Nb_sample</code>.</p></dd>


<dt id="arg-binpersample">BinPerSample<a class="anchor" aria-label="anchor" href="#arg-binpersample"></a></dt>
<dd><p><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a> vector (with default): vector with the number of BIN files per sample.
The length of this vector must be equal to <code>Nb_sample</code> and the sum of entries of this vector must be equal to <code>Nb_binfile</code>.
If there is more than one BIN file per sample, see the details section for instructions regarding how to correctly
fill <code>BinPerSample</code> vector.
Otherwise, this vector must contain a list of 1 values.</p></dd>


<dt id="arg-sepdp">sepDP<a class="anchor" aria-label="anchor" href="#arg-sepdp"></a></dt>
<dd><p><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a> (with default): column separator in the <code>DiscPose.csv</code> files.</p></dd>


<dt id="arg-sepde">sepDE<a class="anchor" aria-label="anchor" href="#arg-sepde"></a></dt>
<dd><p><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a> (with default): column separator in the <code>DoseEnv.csv</code> files.</p></dd>


<dt id="arg-sepds">sepDS<a class="anchor" aria-label="anchor" href="#arg-sepds"></a></dt>
<dd><p><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a> (with default): column separator in the `DoseLab.csv“ files.</p></dd>


<dt id="arg-sepr">sepR<a class="anchor" aria-label="anchor" href="#arg-sepr"></a></dt>
<dd><p><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a> (with default): column separator in the Rule.csv files.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a> (with default): enable/disable verbose mode</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>further arguments that can be passed to <a href="https://r-lum.github.io/Luminescence/reference/read_BIN2R.html" class="external-link">Luminescence::read_BIN2R</a>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list containing the following objects:</p><ul><li><p><b>LT</b> (one list per sample); each list contains all L/T values for the corresponding sample;</p></li>
<li><p><b>sLT</b> (one list per sample); each list contains all uncertainties on L/T values for the corresponding sample;</p></li>
<li><p><b>ITimes</b> (one list per sample); each list contains irradiation time values for the corresponding sample;</p></li>
<li><p><b>dLab</b>, a matrix containing in line <code>i</code>, the laboratory dose rate and its variance for sample <code>i</code>;</p></li>
<li><p><b>ddot_env</b>, a matrix containing in line <code>i</code>, the environmental dose rate and its variance (excluding the common error terms) for sample <code>i</code>;</p></li>
<li><p><b>regDose</b> (one list per sample); each list contains all regenerated doses;</p></li>
<li><p><b>J</b>, a vector giving, for each BIN file, the number of aliquots selected for the analysis;</p></li>
<li><p><b>K</b>, a vector giving, for each BIN file, the number of regenerative doses in the SAR protocol;</p></li>
<li><p><b>Nb_measurement</b>, a vector giving, for each BIN file, the number of measurements.<br></p></li>
</ul><p><b>** How to save this list **</b><br></p>
<p>You can save this list in a <code>.RData</code> object. To do this, you can use the function <code><a href="https://rdrr.io/r/base/save.html" class="external-link">save</a></code>.
Then, to load this list you can use the function <code><a href="https://rdrr.io/r/base/load.html" class="external-link">load</a></code> (see example section fore more details).</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>With <code>Path</code> and <code>FolderNames</code>, this function goes to the sub folders containing the BIN files and associated information to compute
the luminescence data.<br></p>
<p><b>** What are the required files in each subfolder? **</b><br></p>
<p>Each sub folder can be named, for example, as the sample name followed by a number; it must contain:</p><ul><li><p><b>bin.bin</b>: the bin file renamed as bin.BIN (note: the name of all files matters);</p></li>
<li><p><b>DiscPos.csv</b>: a two columns csv file containing the list of disc and grain position number of the previously selected grains
(typically this list will include the position of grains based on their sensitivity, recycling or other properties);</p></li>
<li><p><b>DoseEnv.csv</b>: a two columns file containing the observation of the natural (or environmental),
dose rate, and its non-shared variance (i.e. after removing all shared errors), both in Gy. Note: the user shall provide the squared value of the error associated
with the dose rate experienced by the sample grains in nature;</p></li>
<li><p><b>DoseSourve.csv</b>: a two columns file containing the observation of the laboratory dose rate,
and its variance (squared error) both in Gy;</p></li>
<li><p><b>rule.csv</b>: a csv file containing information on</p><ul><li><p><code>beginSignal=</code>  the first channel for summing the natural or regenerative OSL signal (typically 1 or 6);</p></li>
<li><p><code>endSignal=</code> the last channel for summing the natural or regenerative OSL signal (typically 5 or 10);</p></li>
<li><p><code>beginBackground=</code> the first channel for background estimation of the natural or regenerative OSL signal (typically 76 or 81);</p></li>
<li><p><code>endBackground=</code> the last channel for background estimation of the natural or regenerative OSL signal (typically 95 or 100);</p></li>
<li><p><code>beginTest=</code>,</p></li>
<li><p><code>endTest=</code>,</p></li>
<li><p><code>beginTestBackground=</code>,</p></li>
<li><p><code>endTestBackground=</code> same values as above, for the test dose response (typically the same values should be used);</p></li>
<li><p><code>inflatePercent=</code> uncertainty arising from the instrument reproducibility (typically 0.02, i.e. 2\<!-- %); --></p></li>
<li><p><code>nbOfLastCycleToRemove=</code> number of cycles at the end of the SAR protocol which should not be included in the dose response curve fitting
(typically 1 if only a recycling test is performed, or 2 if both recycling and IR depletion are tested).<br></p></li>
</ul></li>
</ul><p><b>** How to fill the</b> <code>FolderNames</code> <b>vector? **</b><br></p>
<p><code>FolderNames</code> is a vector of length <code>Nb_binfile</code>. <code>FolderNames[i]</code> is the name (e.g., Sample1-File1, or successive names separated by "/" signs,
if BIN files are in subfolders, e.g. Sample1/File1) of the subfolder containing all informations on the BIN file of ID number <code>i</code>.
The names in <code>FolderNames</code> are ordered following two rules:</p><ul><li><p>The names in the <code>FolderNames</code> vector must be ordered following the sample order
(the names of subfolders containing BIN files for the same sample should follow each other in the <code>FolderNames</code> vector, e.g.
Sample1, Sample2-File1, Sample2-File2, etc.).</p></li>
<li><p>If stratigraphic constraints apply to samples, and so a <b>Bayesian model with stratigraphic constraints</b> is implemented,
then the names in the <code>FolderNames</code> vector must be ordered by order of increasing ages. <br>
For example, <code>FolderNames=c(noun1,noun2)</code>, in which case <code>noun1</code> (respectively, <code>noun2</code>) corresponds to the subfolder
name containing the BIN file of sample 1 (respectively of sample 2).
In addition, if we know that sample 1 is younger than sample 2, then <code>FolderNames</code> vector is correctly filled. <br>
If conversely, <code>FolderNames=c(noun2,noun1)</code>, the analysis performed by <code><a href="AgeS_Computation.html">AgeS_Computation</a></code> would not be consistent.<br></p></li>
</ul><p><b>** How to fill the</b> <code>BinPerSample</code> <b>vector? **</b><br></p>
<p><code>BinPerSample[i]</code> correponds to the number of BIN files for the sample whose number ID is equal to <code>i</code>.<br>
For example, let us consider a case with two samples (Sample1 and Sample2), with 2 BIN files for Sample1 and 1 for Sample2.
In this case, <code>Nb_binfile</code>=3 and <code>Nb_sample</code>=2.
The user may then set <code>FolderNames=c("Sample1-File1", "Sample1-File2", "Sample2-File1")</code>, in which case <code>"Sample1-File1"</code> is the name of the subfolder
containing the first BIN file for Sample1, <code>"Sample1-File2"</code> the name of the  subfolder for the second BIN file of Sample1; eventually,
<code>"Sample2-File1"</code> is the name of the subfolder containing the BIN file for the second sample. In this case, <code>BinPerSample=c(2,1)</code>.</p>
<p>For the general BIN-file structure, the reader is referred to the following website:
<code>http://www.nutech.dtu.dk/</code></p>
<p>The function <a href="https://r-lum.github.io/Luminescence/reference/read_BIN2R.html" class="external-link">Luminescence::read_BIN2R</a> developed in <a href="https://r-lum.github.io/Luminescence/reference/Luminescence-package.html" class="external-link">Luminescence::Luminescence-package</a> package is used to read the BIN files.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><a href="https://r-lum.github.io/Luminescence/reference/read_BIN2R.html" class="external-link">Luminescence::read_BIN2R</a>, <code><a href="combine_DataFiles.html">combine_DataFiles</a></code>, <code><a href="Generate_DataFile_MG-deprecated.html">Generate_DataFile_MG</a></code>, <code><a href="LT_RegenDose-deprecated.html">LT_RegenDose</a></code>
<code><a href="Age_Computation.html">Age_Computation</a></code>, <code><a href="AgeS_Computation.html">AgeS_Computation</a></code>, <code><a href="Palaeodose_Computation.html">Palaeodose_Computation</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Claire Christophe, Sebastian Kreutzer, Anne Philippe, Guillaume Guerin</p>
    </div>
    <div class="section level2">
    <h2 id="how-to-cite">How to cite<a class="anchor" aria-label="anchor" href="#how-to-cite"></a></h2>
    <p>Christophe, C., Kreutzer, S., Philippe, A., 2024. Generate_DataFile-deprecated(): Generates, from one (or several) BIN-file(s) of Single-grain OSL measurements, a list of luminescence data and information before statistical analysis (DEPRECATED). In: Christophe, C., Philippe, A., Kreutzer, S., Guérin, G., Baumgarten, F.H., Frerebeau, N., 2024. BayLum: Chronological Bayesian Models Integrating Optically Stimulated. R package version 0.3.3.9000-13. https://CRAN.r-project.org/package=BayLum</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co">## Example for one sample with one Bin File</span></span></span>
<span class="r-in"><span><span class="va">path</span><span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/samp1"</span>, <span class="st">""</span>, package<span class="op">=</span><span class="st">"BayLum"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">folder</span><span class="op">=</span><span class="st">""</span></span></span>
<span class="r-in"><span><span class="va">nbsample</span><span class="op">=</span><span class="fl">1</span>  <span class="co"># give the number of sample</span></span></span>
<span class="r-in"><span><span class="va">Data</span> <span class="op">&lt;-</span> <span class="fu">Generate_DataFile</span><span class="op">(</span></span></span>
<span class="r-in"><span> Path <span class="op">=</span> <span class="va">path</span>,</span></span>
<span class="r-in"><span> FolderNames <span class="op">=</span> <span class="va">folder</span>,</span></span>
<span class="r-in"><span> Nb_sample <span class="op">=</span> <span class="va">nbsample</span>,</span></span>
<span class="r-in"><span> verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">Data</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## to save information in RData object in folder containing bin file</span></span></span>
<span class="r-in"><span><span class="co"># save(Data,file=c(paste(path,folder,'Data.RData',sep="")))</span></span></span>
<span class="r-in"><span><span class="co">## to load information containing Data.RData object</span></span></span>
<span class="r-in"><span><span class="co"># load(file=c(paste(path,folder,"Data.RData",sep="")))</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Claire Christophe, Anne Philippe, Sebastian Kreutzer, Guillaume Guérin, Frederik Harly Baumgarten, Nicolas Frerebeau.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

